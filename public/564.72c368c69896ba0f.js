"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[564],{564:(U,g,i)=>{i.r(g),i.d(g,{ProtectedModule:()=>k});var d=i(9808),s=i(4100),h=i(4004),f=i(8505),C=i(5226),c=i.n(C),t=i(5e3),x=i(6518),P=i(4893),b=i(8966),_=i(4209),m=i(1135);let u=(()=>{class e{constructor(){this._updateTotal$=new m.X({}),this._updateProductList$=new m.X({})}getUpdated$(){return this._updateTotal$}setUpdated$(n){this._updateTotal$.next(n)}getUpdatedProductList$(){return this._updateProductList$}setUpdatedProductList$(n){this._updateProductList$.next(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var O=i(2523);let M=(()=>{class e{transform(n){return n.id||n.alt_img?n.alt_img?n.alt_img:`assets/productos/${n.id}.jpg`:"assets/productos/no-image.png"}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Yjl({name:"imagen",type:e,pure:!0}),e})();function y(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"div",9),t._UZ(1,"img",10),t.ALo(2,"imagen"),t.TgZ(3,"div",11),t.TgZ(4,"h3"),t._uU(5),t.qZA(),t.TgZ(6,"h4"),t._uU(7),t.ALo(8,"currency"),t.qZA(),t.TgZ(9,"p",12),t._uU(10,"Cantidad: "),t._UZ(11,"input",13),t.qZA(),t.TgZ(12,"p",14),t.NdJ("click",function(){const p=t.CHM(n).$implicit;return t.oxw().eliminar(p)}),t._UZ(13,"i",15),t.TgZ(14,"span",16),t._uU(15,"Eliminar del carrito"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=r.$implicit;t.xp6(1),t.Q6J("src",t.lcZ(2,4,n),t.LSH),t.xp6(4),t.Oqu(n.nombre),t.xp6(2),t.Oqu(t.gM2(8,6,n.precio,"EUR","symbol-narrow","1.0-4")),t.xp6(4),t.Q6J("value",n.cantidad)}}const v=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-home"]],decls:2,vars:0,template:function(n,o){1&n&&(t.TgZ(0,"div"),t._UZ(1,"router-outlet"),t.qZA())},directives:[s.lC],styles:[""]}),e})(),children:[{path:"productos",component:(()=>{class e{constructor(n,o,a,p,l,A,T){this._router=n,this._authService=o,this._productoService=a,this._location=p,this._dialog=l,this._updateCartService=A,this._update=T,this.productos=[],this.titulo="Carrito",this.total=0,this.paymentHandler=null,this.stripeAPIKey="pk_test_51L2FcxLGmgrGzDkTYu1WZDVN7NPtcUtFhQ6QjRpzJpONpjO0LbxzBHO8IGW8atuxOAKm4PlmJIhLwMikvmA5E8At00cj1yaQCo",this.totalItem=0}get usuario(){return this._authService.usuario}ngOnInit(){this._productoService.getProductsFromCady().pipe((0,h.U)(n=>n.reduce((o,a)=>{const p=o.find(l=>l.id===a.id);return p?p.cantidad++:(a.cantidad=1,o.push(a)),o},[]))).subscribe(n=>{this.productos=n,this.productos.forEach(o=>{this.total+=o.cantidad*o.precio})}),this._updateCartService.setUpdatedCart$(this.productos),this.invokeStripe()}eliminar(n){this._productoService.removeArticleToCart(n).pipe((0,f.b)(()=>this._router.navigateByUrl("/refresh",{skipLocationChange:!0}).then(()=>{this._router.navigate([decodeURI(this._location.path())])}))).subscribe(o=>{"true"===o.ok?c().fire({position:"center",icon:"success",title:"Producto eliminado del carrito",showConfirmButton:!1,timer:1500}):c().fire({position:"center",icon:"error",title:"Ocurrio un error a la hora de eliminar el producto",showConfirmButton:!1,timer:1500})}),this._updateCartService.setUpdatedCart$(this.productos)}makePayment(n){window.StripeCheckout.configure({key:this.stripeAPIKey,locale:"auto",token:function(a){a.id?c().fire({position:"center",icon:"success",title:"Pago realizado con exito",showConfirmButton:!1,timer:1500}):c().fire({position:"center",icon:"error",title:"Ha habido un error a la hora de efectuar su pago",showConfirmButton:!1,timer:2e3})}}).open({name:"ItSolutionStuff.com",description:"3 widgets",amount:100*n})}invokeStripe(){if(!window.document.getElementById("stripe-script")){const n=window.document.createElement("script");n.id="stripe-script",n.type="text/javascript",n.src="https://checkout.stripe.com/checkout.js",n.onload=()=>{this.paymentHandler=window.StripeCheckout.configure({key:this.stripeAPIKey,locale:"auto",token:function(o){o.id?c().fire({position:"center",icon:"success",title:"Pago realizado con exito",showConfirmButton:!1,timer:1500}):c().fire({position:"center",icon:"error",title:"Ha habido un error a la hora de efectuar su pago",showConfirmButton:!1,timer:2e3})}})},window.document.body.appendChild(n)}}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(s.F0),t.Y36(x.e),t.Y36(P.k),t.Y36(d.Ye),t.Y36(b.uw),t.Y36(_.K),t.Y36(u))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-carrito"]],decls:23,vars:8,consts:[[1,"mt-4"],[3,"titulo"],[1,"wrapper"],[1,"project"],[1,"shop"],["class","box",4,"ngFor","ngForOf"],[1,"right-bar"],[2,"cursor","pointer",3,"click"],[1,"fa","fa-shopping-cart"],[1,"box"],[1,"card-img",3,"src"],[1,"content"],[1,"unit"],[3,"value"],[1,"btn-area",3,"click"],[1,"fa","fa-trash"],[1,"btn2"]],template:function(n,o){1&n&&(t.TgZ(0,"div"),t.TgZ(1,"div",0),t._UZ(2,"app-title",1),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.YNc(6,y,16,11,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"p"),t.TgZ(9,"span"),t._uU(10,"Tax (%5)"),t.qZA(),t.TgZ(11,"span"),t._uU(12,"$10"),t.qZA(),t.qZA(),t._UZ(13,"hr"),t.TgZ(14,"p"),t.TgZ(15,"span"),t._uU(16,"Total"),t.qZA(),t.TgZ(17,"span"),t._uU(18),t.ALo(19,"currency"),t.qZA(),t.qZA(),t.TgZ(20,"a",7),t.NdJ("click",function(){return o.makePayment(o.total)}),t._UZ(21,"i",8),t._uU(22,"Terminar y comprar"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Q6J("titulo",o.titulo),t.xp6(4),t.Q6J("ngForOf",o.productos),t.xp6(12),t.Oqu(t.gM2(19,3,o.total,"EUR","symbol-narrow","1.0-4")))},directives:[O.r,d.sg],pipes:[M,d.H9],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.wrapper[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding:30px 0;text-align:center;text-transform:uppercase}.project[_ngcontent-%COMP%]{display:flex}.shop[_ngcontent-%COMP%]{flex:75%}.box[_ngcontent-%COMP%]{display:flex;width:100%;height:200px;overflow:hidden;margin-bottom:20px;background-color:#fff;transition:all .6s ease;box-shadow:#64646f33 0 7px 29px}.box[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px;height:200px;object-fit:cover}.content[_ngcontent-%COMP%]{padding:20px;position:relative;width:100%}.content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:30px}.content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:50px}.btn-area[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:20px;padding:10px 25px;background-color:#3a71a9;color:#fff;cursor:pointer;border-radius:10px;font-weight:600}.btn-area[_ngcontent-%COMP%]:hover{background-color:#3a71a9;color:#fff}.unit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:50px;padding:8px;text-align:center}.btn-area[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.right-bar[_ngcontent-%COMP%]{flex:25%;margin-left:20px;padding:20px;height:400px;border-radius:5px;background:#fff;box-shadow:#64646f33 0 7px 29px}.right-bar[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin-bottom:25px}.right-bar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:30px;font-size:20px}.right-bar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-color:#3a71a9;color:#fff;text-decoration:none;display:block;text-align:center;height:40px;line-height:40px;font-weight:900}.right-bar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:15px}.right-bar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#3a71a9}@media screen and (max-width: 700px){.content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:13px}.content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:15px}.btn2[_ngcontent-%COMP%]{display:none}.box[_ngcontent-%COMP%]{height:200px}.box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px;width:100px}.btn-area[_ngcontent-%COMP%]{bottom:52px;right:34px}.unit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:55px;padding:2px;text-align:center}}@media screen and (max-width: 900px){.project[_ngcontent-%COMP%]{flex-direction:column}.right-bar[_ngcontent-%COMP%]{margin-left:0;margin-bottom:20px}}@media screen and (max-width: 1250px){.wrapper[_ngcontent-%COMP%]{max-width:95%}}"]}),e})()},{path:"finalizar-compra",component:(()=>{class e{constructor(n){this._update=n,this.paymentHandler=null,this.stripeAPIKey="pk_test_51L2FcxLGmgrGzDkTYu1WZDVN7NPtcUtFhQ6QjRpzJpONpjO0LbxzBHO8IGW8atuxOAKm4PlmJIhLwMikvmA5E8At00cj1yaQCo"}ngOnInit(){this._update.getUpdated$().subscribe(n=>this.total=n),this.invokeStripe()}makePayment(n){window.StripeCheckout.configure({key:this.stripeAPIKey,locale:"auto",token:function(a){console.log(a),alert("Stripe token generated!")}}).open({name:"ItSolutionStuff.com",description:"3 widgets",amount:100*n})}invokeStripe(){if(!window.document.getElementById("stripe-script")){const n=window.document.createElement("script");n.id="stripe-script",n.type="text/javascript",n.src="https://checkout.stripe.com/checkout.js",n.onload=()=>{this.paymentHandler=window.StripeCheckout.configure({key:this.stripeAPIKey,locale:"auto",token:function(o){console.log(o),alert("Payment has been successfull!")}})},window.document.body.appendChild(n)}}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(u))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-finalizar-compra"]],decls:12,vars:0,consts:[[1,"container"],[1,"mt-5","mb-4"],[1,"col-md-5","mb-2"],[1,"btn","btn-danger","btn-block",3,"click"],[1,"btn","btn-primary","btn-block",3,"click"],[1,"col-md-5"],[1,"btn","btn-success","btn-block",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"h2",1),t._uU(2,"Angular 13 Stripe Payment Gateway Example"),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"button",3),t.NdJ("click",function(){return o.makePayment(15)}),t._uU(5,"Pay $15"),t.qZA(),t.qZA(),t.TgZ(6,"div",2),t.TgZ(7,"button",4),t.NdJ("click",function(){return o.makePayment(25)}),t._uU(8,"Pay $25"),t.qZA(),t.qZA(),t.TgZ(9,"div",5),t.TgZ(10,"button",6),t.NdJ("click",function(){return o.makePayment(35)}),t._uU(11,"Pay $35"),t.qZA(),t.qZA(),t.qZA())},styles:["*[_ngcontent-%COMP%]{margin:0;padding:0}html[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{background-color:#000}.card0[_ngcontent-%COMP%]{margin:40px 12px 15px;border:0}.card1[_ngcontent-%COMP%]{margin:0;padding:25px 15px 0;background:#263238;height:100%}.bill-head[_ngcontent-%COMP%]{color:#fff;font-weight:700;margin-bottom:0;margin-top:0;font-size:30px}.line[_ngcontent-%COMP%]{border-right:1px grey solid}.bill-date[_ngcontent-%COMP%]{color:#bdbdbd}.red-bg[_ngcontent-%COMP%]{margin-top:25px;margin-left:0;margin-right:0;background-color:#f44336;padding-left:20px!important;padding:25px 10px 25px 15px}#total[_ngcontent-%COMP%]{margin-top:0;padding-left:7px}#total-label[_ngcontent-%COMP%]{margin-bottom:0;color:#fff;padding-left:7px}#heading1[_ngcontent-%COMP%]{color:#fff;font-size:20px;padding-left:10px}#heading2[_ngcontent-%COMP%]{font-size:27px;color:#d50000}.placeicon[_ngcontent-%COMP%]{font-family:fontawesome!important}.card2[_ngcontent-%COMP%]{padding:25px;margin:0;height:100%}.form-card[_ngcontent-%COMP%]   .pay[_ngcontent-%COMP%]{font-weight:700}.form-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-card[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:10px 8px;border:none;border:1px solid lightgrey;border-radius:0;margin-bottom:25px;margin-top:2px;width:100%;box-sizing:border-box;font-family:montserrat;color:#2c3e50;font-size:14px;letter-spacing:1px}.form-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-card[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{box-shadow:none!important;border:none;font-weight:700;border:1px solid gray;outline-width:0}.btn-info[_ngcontent-%COMP%]{color:#fff!important}.radio-group[_ngcontent-%COMP%]{position:relative;margin-bottom:25px}.radio[_ngcontent-%COMP%]{display:inline-block;width:204;height:64;border-radius:0;background:lightblue;box-sizing:border-box;border:2px solid lightgrey;cursor:pointer;margin:8px 25px 8px 0}.radio[_ngcontent-%COMP%]:hover{box-shadow:0 0 0 1px #0003}.radio.selected[_ngcontent-%COMP%]{box-shadow:0 0 0 1px #0006}.fit-image[_ngcontent-%COMP%]{width:100%;object-fit:cover}"]}),e})()},{path:"",redirectTo:"productos"}]}];let Z=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[s.Bz.forChild(v)],s.Bz]}),e})();var w=i(4466);let k=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,Z,w.m]]}),e})()}}]);